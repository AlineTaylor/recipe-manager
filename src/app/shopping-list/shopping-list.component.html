<div class="shopping-list-container">
  <div class="section-header">
    <h1>🛒 Shopping List</h1>
    <app-unit-toggle [unitSystem]="unitSystem"></app-unit-toggle>
    <div class="button-group">
      <button
        title="Share via email"
        matTooltip="Share via email"
        class="share-button"
        mat-button
        (click)="openDialog(emailSharingComponent, 'shopping-list')"
      >
        <mat-icon>mail</mat-icon>
      </button>
      <button
        title="Print this page"
        matTooltip="Print this page"
        class="share-button"
        (click)="printPage()"
      >
        <mat-icon>print</mat-icon>
      </button>
    </div>
  </div>
  <p class="subtitle">All the ingredients you need from your saved recipes.</p>

  @for(item of visibleShoppingList(); track item.id){
  <div class="ingredient-group">
    <div class="ingredient-card">
      <p class="ingredient-name">{{ item.ingredient?.ingredient }}</p>
      <p class="ingredient-qty">
        {{ getQty(item).qty }} {{ getQty(item).unit }}
      </p>
      <button
        mat-icon-button
        title="Hide this ingredient from the shopping list"
        (click)="toggleIngredient(item)"
      >
        <mat-icon>remove_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  } @if(!shoppingList().length){
  <div class="empty-state">
    <p>Your shopping list is empty.</p>
    <a routerLink="/my-recipes" routerLinkActive="active-link" class="back-link"
      >← Back to Recipes</a
    >
  </div>
  }
</div>
